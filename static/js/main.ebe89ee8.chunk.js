(this.webpackJsonpboussole=this.webpackJsonpboussole||[]).push([[0],[,,,function(e,t,n){e.exports={taskList:"Tasks_taskList__1j01R",tasksFilter:"Tasks_tasksFilter__SByHK",visible:"Tasks_visible__2gUcH",tasksFilterInner:"Tasks_tasksFilterInner__37v1d",taskFilterText:"Tasks_taskFilterText__1lomt",tasks:"Tasks_tasks__4y0vu",tasksButtons:"Tasks_tasksButtons__XJ-pN",task:"Tasks_task__3bw5D",title:"Tasks_title__1CtZZ",taskForm:"Tasks_taskForm__oi8da",button:"Tasks_button__25aul",taskStateIndicator:"Tasks_taskStateIndicator__3zudG",notCurrent:"Tasks_notCurrent__21dv8",clickable:"Tasks_clickable__fAQfc",thickBorder:"Tasks_thickBorder__3vSP1",small:"Tasks_small__eHZhy",taskStateClosed:"Tasks_taskStateClosed__2ySBA"}},,,,,,,,,,,,,function(e,t,n){e.exports={tag:"TagComponent_tag__O9Do5",noTag:"TagComponent_noTag__2j8yO",clickable:"TagComponent_clickable__lE7XX",active:"TagComponent_active__2nCyq",remove:"TagComponent_remove__2SJVD"}},,function(e,t,n){e.exports={app:"App_app__32N6G",saveButton:"App_saveButton__1Y4GW",saving:"App_saving__19u3L",blinker:"App_blinker__3O4-b"}},function(e,t,n){e.exports={wrapper:"TextEditor_wrapper__2GZg2",textEditor:"TextEditor_textEditor__Ivlrn"}},function(e,t,n){e.exports={dialog:"Dialog_dialog__2jZTN",title:"Dialog_title__1r951",content:"Dialog_content__3EOpS",buttons:"Dialog_buttons__1OnQ6"}},function(e,t,n){e.exports={iconDesigner:"IconDesigner_iconDesigner__FdLiT",iconPreview:"IconDesigner_iconPreview__2680x"}},function(e,t,n){e.exports={button:"Button_button___qM3V",wide:"Button_wide__3ejWw",light:"Button_light__2KPpW"}},,function(e,t,n){e.exports={field:"Field_field__1UM57",label:"Field_label__2F_cw"}},,,function(e,t,n){e.exports={loadStatus:"LoadStatus_loadStatus__2d1fD",loadBar:"LoadStatus_loadBar__eTTVa"}},,,,,,function(e,t,n){e.exports={overlay:"Overlay_overlay__3WkJQ"}},function(e,t,n){e.exports={spaceOutVerticalComponents:"Spacing_spaceOutVerticalComponents__x2Ed8"}},,,function(e,t,n){e.exports=n.p+"static/media/boussole.b5a6f5f8.svg"},,,function(e,t,n){e.exports=n(52)},,,,,function(e,t,n){},,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),c=n.n(o),i=(n(45),n(12)),l=n(18),s=n.n(l),u=n(13),d=n(10),f=n(15),v=n(38),h=n(31),m=n(39),p=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(v.a)(this,Object(h.a)(t).call(this,e))).state={isError:!1,error:null},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({isError:!0,error:t})}},{key:"render",value:function(){return this.state.isError?a.createElement("div",null,this.state.error.componentStack):this.props.children}}]),t}(a.Component),b=n(1),g=n(3),k=n.n(g),E=n(2);function x(e){for(var t="",n=0;n<e;n++)t+="0123456789abcdef".charAt(Math.floor(Math.random()*"0123456789abcdef".length));return t}var _=function e(t){var n=this;Object(d.a)(this,e),this.store=void 0,this.createTask=function(e){n.store.updateState((function(t){var n="".concat(x(8),"-").concat(x(4),"-").concat(x(4),"-").concat(x(4),"-").concat(x(12)),a=new Date;return t[n]=Object(E.a)({},e,{id:n,created:a,modified:a}),Object(E.a)({},t)}))},this.updateTask=function(e,t){n.store.updateState((function(n){var a=n[e];if(!a)throw new Error("No task found with id {id}");return n[e]=Object(E.a)({},a,{},t),Object(E.a)({},n)}))},this.store=t},C=n(4),y=n.n(C),w=n(7),O=function(){function e(t){Object(d.a)(this,e),this.authManager=void 0,this.authManager=t}return Object(f.a)(e,[{key:"loadData",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authManager.acquireToken();case 2:return t=e.sent,e.next=5,fetch("https://graph.microsoft.com/v1.0/me/drive/root:/boussole-data-files/notes.json:/content",{headers:{Authorization:"Bearer "+t}});case 5:return n=e.sent,e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",N(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveData",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I(t),e.next=3,this.authManager.acquireToken();case 3:return a=e.sent,e.next=6,fetch("https://graph.microsoft.com/v1.0/me/drive/root:/boussole-data-files/notes.json:/content",{method:"PUT",headers:{"Content-Type":"text/plain",Authorization:"Bearer "+a},body:JSON.stringify(n,null,"  ")});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function I(e){var t,n=[];for(var a in e)n.push({state:"created"===(t=e[a]).state?void 0:t.state,tagId:t.tagId||void 0,id:t.id,title:t.title,description:t.description||void 0,created:t.created,modified:t.modified,dateClosed:t.dateClosed});return{tasks:n}}function N(e){var t={};return e.tasks.forEach((function(e){return t[e.id]=function(e){return{state:e.state||"created",tagId:e.tagId||null,id:e.id,title:e.title,description:e.description||"",created:e.created,modified:e.modified,dateClosed:e.dateClosed}}(e)})),t}var T=n(32),j=["https://graph.microsoft.com/Files.ReadWrite"],S=function(){function e(){Object(d.a)(this,e),this.account=void 0,this.application=new T.a({auth:{clientId:"c1fef6c7-2dd3-425b-aa1e-e9c94ca00c63",authority:"https://login.microsoftonline.com/consumers/"}})}return Object(f.a)(e,[{key:"authenticate",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.application.handleRedirectPromise();case 2:if(0!==(t=this.application.getAllAccounts()).length){e.next=6;break}return e.next=6,this.application.loginRedirect();case 6:this.account=t[0];case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"acquireToken",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authenticate();case 2:return e.next=4,this.application.acquireTokenSilent({scopes:j,account:this.account});case 4:return t=e.sent,e.abrupt("return",t.accessToken);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),B=r.a.createContext(void 0),L=function(e){var t=e.getNotAuthenticatedComponents,n=e.getAuthenticatedComponents,a=r.a.useMemo((function(){return new S}),[]),o=r.a.useState(!1),c=Object(b.a)(o,2),i=c[0],l=c[1];return r.a.useEffect((function(){Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.authenticate();case 2:l(!0);case 3:case"end":return e.stop()}}),e)})))()}),[a]),r.a.createElement(B.Provider,{value:a},i?n():t())},A=r.a.createContext(void 0),D=function(e){var t=e.children,n=function(){var e=r.a.useContext(B);if(!e)throw new Error("Please define an AuthManagerProvider upper in the component tree.");return e}(),a=r.a.useMemo((function(){return new O(n)}),[n]);return r.a.createElement(A.Provider,{value:a},t)},P=function(){var e=r.a.useContext(A);if(!e)throw new Error("Please define a BoussoleDataStoreProvider upper in the component tree.");return e},F=function e(t){var n=this;Object(d.a)(this,e),this.state=void 0,this.callbacks=void 0,this.getState=function(){return n.state},this.setState=function(e){n.state=e,n.notify()},this.updateState=function(e){var t=e(n.state);t!==n.state&&(n.state=t,n.notify())},this.subscribe=function(e){if(n.callbacks.indexOf(e)>=0)throw new Error("The callback is already registered.");return n.callbacks.push(e),function(){n.callbacks=n.callbacks.filter((function(t){return t!==e}))}},this.notify=function(){var e=n.state,t=!0,a=!1,r=void 0;try{for(var o,c=n.callbacks[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var i=o.value;if(n.state!==e)return;n.callbacks.indexOf(i)<0||i(e)}}catch(l){a=!0,r=l}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}},this.state=t,this.callbacks=[]},R=r.a.createContext(void 0),M=function(e){var t=e.getNotReadyComponents,n=e.getReadyComponents,a=P(),o=r.a.useState(void 0),c=Object(b.a)(o,2),i=c[0],l=c[1];return r.a.useEffect((function(){Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.loadData();case 2:t=e.sent,l(new F(t));case 4:case"end":return e.stop()}}),e)})))()}),[a]),void 0===i?r.a.createElement(r.a.Fragment,null,t()):r.a.createElement(R.Provider,{value:i},n())},z=function(){var e=r.a.useContext(R);if(!e)throw new Error("Please define a BoussoleDataStateProvider upper in the component tree.");return e},V=r.a.createContext(void 0),W=function(e){var t=e.children,n=z(),a=r.a.useMemo((function(){return new _(n)}),[n]);return r.a.createElement(V.Provider,{value:a},t)},H=function(){var e=r.a.useContext(V);if(!e)throw new Error("Please define a BoussoleDataServiceProvider upper in the component tree.");return e},J=function(e){return{state:e,dateClosed:"finished"===e||"abandoned"===e?new Date:void 0}},q=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return!!e})).join(" ")},X=function(e){switch(e){case"created":return"En attente";case"in-backlog":return"Dans le radar";case"next":return"Prochainement";case"active":return"En cours";case"finished":return"Termin\xe9e";case"abandoned":return"Abandonn\xe9e"}},Z=function(e){if(!e.match(/^#[0-9a-fA-F]{6}$/))throw new Error("invalid color");return{red:parseInt(e.substr(1,2),16),green:parseInt(e.substr(3,2),16),blue:parseInt(e.substr(5,2),16)}},G=function(e){return e<0?e=0:e>255&&(e=255),Math.round(e).toString(16).padStart(2,"0")},Q=function(e){return"#".concat(G(e.red)).concat(G(e.green)).concat(G(e.blue))},U={created:Z("#dadada"),"in-backlog":Z("#ffa9f2"),next:Z("#aa8afd"),active:Z("#66dfff"),finished:Z("#6eef00"),abandoned:Z("#999999")},K=function(e,t,n){return{backgroundColor:Q(U[e]),borderColor:Q((a=U[e],r=.2,{red:a.red*(1-r),green:a.green*(1-r),blue:a.blue*(1-r)}))};var a,r},$=function(e){var t=e.state,n=e.showText,a=e.showCurrentBorder,o=e.showNotCurrent,c=e.onClick;return r.a.createElement("div",{title:n?void 0:X(t),className:q(k.a.taskStateIndicator,!n&&k.a.small,a&&k.a.thickBorder,o&&k.a.notCurrent,c&&k.a.clickable),style:K(t),onClick:c?function(e){e.stopPropagation(),c()}:void 0},n&&X(t))},Y=n(20),ee=n.n(Y),te=n(33),ne=n.n(te),ae=function(e){var t=e.children;return r.a.createElement("div",{className:ne.a.overlay},t)},re=n(22),oe=n.n(re),ce=function(e){var t=e.isLight,n=e.isWide,a=e.title,o=e.onClick,c=e.children;return r.a.createElement("div",{className:q(oe.a.button,t&&oe.a.light,n&&oe.a.wide),title:a,onClick:o},c)},ie=function(e){var t=e.title,n=e.buttons,a=e.children;return r.a.createElement(ae,null,r.a.createElement("div",{className:ee.a.dialog},t&&r.a.createElement("div",{className:ee.a.title},t),r.a.createElement("div",{className:ee.a.content},a),n&&r.a.createElement("div",{className:ee.a.buttons},n.map((function(e){return r.a.createElement(ce,{isWide:!0,onClick:e.onclick},e.text)})))))},le=n(34),se=n.n(le),ue=function(e){var t=e.state,n=e.onChange,a=r.a.useCallback((function(e){return r.a.createElement($,{state:e,showText:!0,showCurrentBorder:e===t,showNotCurrent:e!==t,onClick:e===t?void 0:function(){n(e)}})}),[t,n]);return r.a.createElement("div",{className:se.a.spaceOutVerticalComponents},a("created"),a("in-backlog"),a("next"),a("active"),r.a.createElement("div",{className:k.a.taskStateClosed},a("finished"),a("abandoned")))},de=function(e){var t=e.state,n=e.onClose;return r.a.createElement(ie,{buttons:[{text:"Annuler",onclick:function(){n()}}]},r.a.createElement(ue,{state:t,onChange:n}))},fe=n(24),ve=n.n(fe),he=function(e){var t=e.label,n=e.children;return r.a.createElement("div",{className:ve.a.field},r.a.createElement("div",{className:ve.a.label},t),r.a.createElement("div",null,n))},me=[{id:"cp",name:"Conseil de paroisse"},{id:"scouts",name:"Scouts"},{id:"travaux",name:"Travaux maison"},{id:"achats",name:"Achats"},{id:"jardin",name:"Jardin"},{id:"loisirs",name:"Loisirs"},{id:"maison",name:"Entretien, rangement maison"},{id:"administration",name:"Administration"},{id:"vie-famille",name:"Vie de famille, spiritualit\xe9"},{id:"coup-d-pouce",name:"Coup d'Pouce"},{id:"\xe9glise",name:"\xc9glise, END"},{id:"pro",name:"Professionnel"}],pe=n(16),be=n.n(pe),ge=function(e){var t=e.text,n=e.active,a=e.noTag,o=e.onClick,c=e.onRemove;return r.a.createElement("div",{className:q(be.a.tag,o&&be.a.clickable,n&&be.a.active,a&&be.a.noTag),onClick:o?function(e){e.stopPropagation(),o()}:void 0},t,c&&r.a.createElement("span",{className:be.a.remove,onClick:function(e){e.stopPropagation(),c()}},"X"))},ke=function(e){var t=e.tagId,n=e.active,a=e.onClick,o=e.onRemove,c=me.find((function(e){return e.id===t}));return r.a.createElement(ge,{text:c?c.name:"Pas de cat\xe9gorie",active:n,noTag:null===t,onClick:a?function(){return a(t)}:void 0,onRemove:o})},Ee=n(8),xe=function(e){var t=e.tagId,n=e.onChange,a=e.onClose,o=r.a.useMemo((function(){var e=me.map((function(e){return e.id}));return null===t||void 0===t?[null].concat(Object(Ee.a)(e)):[t,null].concat(Object(Ee.a)(e.filter((function(e){return e!==t}))))}),[t]);return r.a.createElement(ie,{buttons:[{text:"Annuler",onclick:function(){a()}}]},o.map((function(e){return r.a.createElement(ke,{tagId:e,active:e===t,onClick:e===t?void 0:n})})))},_e=function(e){var t=e.task,n=e.onChange,a=r.a.useState(!1),o=Object(b.a)(a,2),c=o[0],i=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{state:t.state,onChange:function(e){return n(Object(E.a)({},t,{},J(e)))}}),r.a.createElement(he,{label:"titre"},r.a.createElement("input",{type:"text",value:t.title,onChange:function(e){return n(Object(E.a)({},t,{title:e.target.value}))}})),r.a.createElement(he,{label:"cat\xe9gorie"},r.a.createElement(ke,{tagId:t.tagId,active:!0,onClick:function(){i(!0)}})),r.a.createElement(he,{label:"description"},r.a.createElement("textarea",{value:t.description,onChange:function(e){return n(Object(E.a)({},t,{description:e.target.value}))}})),c&&r.a.createElement(xe,{tagId:t.tagId,onChange:function(e){n(Object(E.a)({},t,{tagId:e})),i(!1)},onClose:function(){return i(!1)}}))};function Ce(e){var t=Object(a.useMemo)((function(){return e.task?e.task.id:void 0}),[e.task]),n=Object(a.useState)(e.task||{id:"",tagId:null,state:"created",title:"",description:"",created:new Date,modified:new Date}),o=Object(b.a)(n,2),c=o[0],i=o[1],l=H(),s=l.createTask,u=l.updateTask;return r.a.createElement(ie,{title:t?"Modifier une t\xe2che":"Nouvelle t\xe2che",buttons:[{text:"Valider",onclick:function(){t?u(t,c):s(c),e.onClose()}},{text:"Annuler",onclick:e.onClose}]},r.a.createElement(_e,{task:c,onChange:i}))}var ye=function(e){var t=e.task,n=H().updateTask,a=r.a.useState(!1),o=Object(b.a)(a,2),c=o[0],i=o[1],l=r.a.useState(!1),s=Object(b.a)(l,2),u=s[0],d=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:function(){return i(!0)},className:k.a.task},r.a.createElement("div",{className:k.a.title},t.title),r.a.createElement($,{state:t.state,onClick:function(){return d(!0)}})),c&&r.a.createElement(Ce,{task:t,onClose:function(){return i(!1)}}),u&&r.a.createElement(de,{state:t.state,onClose:function(e){d(!1),e&&n(t.id,J(e))}}))},we=r.a.createContext(void 0),Oe=function(e){var t=e.children,n=z(),a=r.a.useState(n.getState()),o=Object(b.a)(a,2),c=o[0],i=o[1];return r.a.useEffect((function(){return n.subscribe(i)}),[n]),r.a.createElement(we.Provider,{value:c},t)},Ie=function(e){return r.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd",viewBox:"0 0 640 640"},e),r.a.createElement("path",{d:"M626.689 15.414zm-55.654 574.472v.011H459.336c-2.09 0-3.79-1.689-3.79-3.767V416.97l-.013-.508c0-4.701-.862-8.599-2.575-11.587a23.657 23.657 0 0 0-1.05-1.618 13.646 13.646 0 0 0-1.23-1.394l-.105-.13c-1.571-1.559-3.544-2.764-5.859-3.59l-1.287-.39-.201-.071h-.035c-2.15-.579-4.571-.874-7.205-.886h-.26l-.402-.012H204.262c-4.618 0-8.433.886-11.35 2.528l-.095.07-1.382.875-.212.189c-.485.354-.957.791-1.394 1.193l-.083.094-.035.036c-3.213 3.271-4.82 8.197-4.82 14.705l-.023.2V586.13h-.012c0 2.08-1.724 3.756-3.78 3.756h-63.874a3.744 3.744 0 0 1-2.681-1.11l-62.906-62.894a3.901 3.901 0 0 1-1.512-3.083V69.474l-.024-.402c0-4.323.78-7.949 2.292-10.795h.011c.284-.555.58-1.016.898-1.5l.13-.166a9.743 9.743 0 0 1 1.3-1.535l.046-.083.13-.13h.012c1.323-1.322 2.965-2.35 4.82-3.094l.188-.095.095-.035.082-.06.945-.318v.012l.071-.036c2.197-.708 4.713-1.05 7.512-1.11l.46-.035h54.202c2.079 0 3.791 1.689 3.791 3.767v227.436c0 2.729.237 5.35.697 7.796a36.732 36.732 0 0 0 2.02 6.992l.07.106.013.036v.012a38.87 38.87 0 0 0 3.472 6.52c1.347 2.019 2.894 4.027 4.713 5.905l.118.094.023.036.036.012a38.841 38.841 0 0 0 8.433 6.638l.06.011.07.024.07.035 1.678.886.024.012 2.09.933v.012l.036.012.012.012h.035v.011c1.713.709 3.472 1.347 5.232 1.784h.036l.165.023.047.012h.178l1.346.284v.012c2.362.448 4.854.708 7.382.732l.106-.012h309.181c5.386 0 10.323-.933 14.847-2.787l.07-.048c4.536-1.866 8.682-4.677 12.473-8.421l.142-.177c1.866-1.878 3.579-3.91 4.996-6.024a36.432 36.432 0 0 0 3.45-6.342l.011-.06.035-.059.036-.118a35.794 35.794 0 0 0 2.138-6.98l.023-.142c.46-2.457.685-5.067.685-7.772V53.871c0-2.079 1.725-3.78 3.827-3.78h53.765c3.047 0 5.693.367 8.008 1.075 2.492.78 4.618 2.032 6.26 3.674 1.346 1.334 2.433 3.023 3.189 4.972l-.024.012.07.095.32.909h-.024l.06.13c.72 2.138 1.05 4.654 1.11 7.406l.047.448v.284l-.024.082v501.727c0 2.906-.378 5.587-1.075 7.855l-.059.165v.012l-.012.118-.413 1.122h-.012l-.118.296-.472 1.039-.071.2-.13.213-.012-.012-.154.308-.755 1.169h-.012l-.26.401-.732.898-.32.354c-.767.815-1.7 1.56-2.74 2.186a17.6 17.6 0 0 1-2.881 1.358l-.331.118c-.839.283-1.76.52-2.74.72l-.095.012-.059.012-.094.024-.45.07-.106.024h-.023l-.083.012c-1.17.165-2.54.283-3.957.307h-.696zM467.912 51.155l-296.248-1.063V262.42h-.024c0 2.386.295 4.465.886 6.272.154.295.224.543.343.78a10.107 10.107 0 0 0 2.078 3.153l.154.142v.011c.295.296.59.544.874.768.307.26.697.496 1.063.709 2.055 1.193 4.795 1.76 8.232 1.76v.011l269 1.312v-.012h.023v.012c4.724 0 8.197-1.099 10.346-3.308 2.186-2.22 3.284-5.716 3.296-10.535h-.024V51.155zM221.177 426.502h79.23v.023c1.842 0 3.377 1.5 3.377 3.343V586.53c0 1.843-1.535 3.367-3.378 3.367h-79.23v-.012c-1.83 0-3.365-1.512-3.365-3.355V429.868c0-1.842 1.535-3.366 3.366-3.366zm405.596 197.672zm-576.15-622h543.55c6.355 0 12.237 1.122 17.67 3.342l2.646 1.17c4.394 2.137 8.469 5.066 12.272 8.799l3.39 3.85 2.929 4.075c4.594 7.217 6.933 15.425 6.933 24.591v543.538c0 6.33-1.122 12.225-3.354 17.693-2.21 5.445-5.516 10.418-9.922 14.988a46.306 46.306 0 0 1-7.724 6.32l-1.323.885a40.453 40.453 0 0 1-5.823 2.989c-5.457 2.29-11.35 3.413-17.705 3.413H90.475l-1.276-1.287-83.576-83.576-5.48-3.638V47.846C-1.7 27.544 14.683 7.89 32.907 5.493c5.469-2.209 11.374-3.319 17.717-3.319z"}))},Ne=function(e){var t=e.headerControls,n=e.children,a=function(){var e=P(),t=z(),n=r.a.useRef({}),a=r.a.useState("all-saved"),o=Object(b.a)(a,2),c=o[0],i=o[1],l=r.a.useCallback((function(t){n.current.modelBeingSaved?n.current.modelToSave=t:Object(w.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.current={modelBeingSaved:t},i("saving"),a.next=4,e.saveData(t);case 4:if(!n.current.modelToSave){a.next=10;break}return n.current={modelBeingSaved:t},a.next=8,e.saveData(t);case 8:a.next=4;break;case 10:n.current={},i("all-saved");case 12:case"end":return a.stop()}}),a)})))()}),[e]);return r.a.useEffect((function(){return t.subscribe(l)}),[t,l]),c}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(i.b,{to:"/editor-analysis"},"Analyse \xe9diteur"),r.a.createElement(i.b,{to:"/editor-test"},"Test \xe9diteur"),r.a.createElement(i.b,{to:"/home"},"Home"),r.a.createElement(i.b,{to:"/tasks"},"T\xe2ches"),r.a.createElement("span",{title:"saving"===a?"En cours d'enregistrement...":"Toutes les donn\xe9es sont sauvegard\xe9es."},r.a.createElement(Ie,{className:q(s.a.saveButton,"saving"===a&&s.a.saving),height:20,width:20})),t),r.a.createElement("section",null,n))},Te=function(e){return r.a.createElement("svg",Object.assign({},e,{viewBox:"0 0 10 10"}),r.a.createElement("path",{d:"M 0.25,1.5 4.25,6 v 3.75 H 5.75 V 6 l 4,-4.5 v -1.25 l -9.5,0 z",fill:"none",strokeWidth:.5,strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4}))},je=function(e){var t=e.visible,n=e.value,a=e.onChange,o=r.a.useRef(null),c=r.a.useState(!1),i=Object(b.a)(c,2),l=i[0],s=i[1];return r.a.useEffect((function(){t&&o.current&&o.current.focus()}),[t]),r.a.createElement("div",{className:q(k.a.tasksFilter,t&&k.a.visible)},r.a.createElement("div",{className:k.a.tasksFilterInner},r.a.createElement("input",{ref:o,className:k.a.taskFilterText,value:n.text,onChange:function(e){return a(Object(E.a)({},n,{text:e.target.value}))}}),void 0===n.tagId?r.a.createElement(ge,{text:"...",noTag:!0,onClick:function(){return s(!0)}}):r.a.createElement(ke,{tagId:n.tagId,active:!0,onClick:function(){return s(!0)},onRemove:function(){return a(Object(E.a)({},n,{tagId:void 0}))}})),l&&r.a.createElement(xe,{tagId:n.tagId,onChange:function(e){a(Object(E.a)({},n,{tagId:e})),s(!1)},onClose:function(){return s(!1)}}))};function Se(e){switch(e){case"active":return 0;case"next":return 1;case"in-backlog":return 2;case"created":return 3;case"finished":return 4;case"abandoned":return 5}}function Be(e,t){return e.state!==t.state?Se(e.state)<Se(t.state)?-1:1:e.title.localeCompare(t.title)}function Le(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function Ae(){var e=function(){var e=r.a.useContext(we);if(!e)throw new Error("Please define a BoussoleDataProvider upper in the component tree.");return e}(),t=r.a.useState(!1),n=Object(b.a)(t,2),a=n[0],o=n[1],c=r.a.useState({text:"",tagId:void 0}),i=Object(b.a)(c,2),l=i[0],s=i[1],u=r.a.useState(!1),d=Object(b.a)(u,2),f=d[0],v=d[1];return r.a.createElement(Ne,{headerControls:r.a.createElement(ce,{onClick:function(){return o(!a)},isLight:!0,title:"Filtrer"},r.a.createElement(Te,{height:20,width:20,stroke:"white"}))},r.a.createElement("div",{className:k.a.taskList},r.a.createElement(je,{visible:a,value:l,onChange:s}),r.a.createElement("div",{className:k.a.tasks},function(e,t){var n=Object.keys(e).map((function(t){return e[t]})).sort(Be);if(t){var a=t.text?Le(t.text):void 0;n=n.filter((function(e){return!(a&&!Le(e.title).includes(a)&&!Le(e.description).includes(a))&&(void 0===t.tagId||e.tagId===t.tagId)}))}return n}(e,a?l:void 0).map((function(e){return r.a.createElement(ye,{key:e.id,task:e})}))),r.a.createElement("div",{className:k.a.tasksButtons},r.a.createElement(ce,{isWide:!0,onClick:function(){return v(!0)}},"+")),f&&r.a.createElement(Ce,{task:void 0,onClose:function(){return v(!1)}})))}var De=n(21),Pe=n.n(De),Fe=function(e){var t=e.svg,n=e.size;return r.a.createElement("div",{className:Pe.a.iconPreview},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t},style:{height:n,width:n}}))},Re=function(){var e=r.a.useState(""),t=Object(b.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:Pe.a.iconDesigner},r.a.createElement("textarea",{value:n,onChange:function(e){return a(e.target.value)}}),r.a.createElement(Fe,{svg:n,size:200}),r.a.createElement(Fe,{svg:n,size:100}),r.a.createElement(Fe,{svg:n,size:50}),r.a.createElement(Fe,{svg:n,size:32}),r.a.createElement(Fe,{svg:n,size:25}))},Me=n(19),ze=n.n(Me),Ve={blocks:[{type:"p",parts:[{text:"This is a complete test with "},{text:"a hyperlink",href:"https://www.google.ch"},{text:", some "},{text:"strong text",strong:!0},{text:" and some "},{text:"emphasized text",em:!0},{text:". Even some text which is "},{text:"a strong and emphasized hyperlink",href:"https://www.google.ch, strong: true ",strong:!0,em:!0},{text:"."}]},{type:"ul",parts:[{text:"We also have a bullet"}]},{type:"ul",parts:[{text:"And another one with a "},{text:"link to the ",href:"https://www.sbb.ch"},{text:"SBB website",href:"https://www.sbb.ch",strong:!0},{text:"."}]},{type:"p",parts:[{text:"And finally..."}]},{type:"ol",parts:[{text:"An ordered list"}]},{type:"ol",parts:[{text:"With two points."}]}],selection:null},We=function(e){return e.parts.reduce((function(e,t){return e+t.text.length}),0)},He=function(e,t,n){return t>=e.length?(console.warn("updating block ".concat(t," but there are only ").concat(e.length," blocks.")),e):e.map((function(e,a){return a===t?n:e}))},Je=function(e,t){if(0===e.length)e.push(t);else{var n=e[e.length-1];n.em!==t.em||n.href!==t.href||n.strong!==t.strong?e.push(t):e.splice(e.length-1,1,Object(E.a)({},n,{text:n.text+t.text}))}return e},qe=function(e,t,n){for(var a={type:e.type,parts:[]},r=0,o=0;o<e.parts.length;o++){var c=e.parts[o],i=r+c.text.length;if((void 0===t||t<=r)&&(void 0===n||n>=i))a.parts.push(c);else if(void 0!==t&&t>=i||void 0!==n&&n<=r);else{var l=c.text;void 0!==n&&n<i&&(l=c.text.substring(0,n-r)),void 0!==t&&t>r&&(l=c.text.substr(t-r)),a.parts.push(Object(E.a)({},c,{text:l}))}r+=c.text.length}return 0===a.parts.length&&a.parts.push({text:""}),a},Xe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("There must be at least one block to merge.");for(var a=Object(E.a)({},t[0],{parts:Object(Ee.a)(t[0].parts)}),r=1;r<t.length;r++){var o,c=t[r];if(c.parts.length>0)Je(a.parts,c.parts[0]),(o=a.parts).push.apply(o,Object(Ee.a)(t[r].parts.slice(1)))}return a},Ze=function(e){if(!e.selection||e.selection.start===e.selection.end)return e;for(var t=e.selection,n=t.start,a=t.end,r=e.blocks.slice(0,n.blockIndex),o=[],c=n.blockIndex;c<=a.blockIndex;c++)if(!(c>n.blockIndex&&c<a.blockIndex)){var i=e.blocks[c];c===n.blockIndex&&o.push(qe(i,void 0,n.charIndex)),c===a.blockIndex&&o.push(qe(i,a.charIndex,void 0))}return r.push(Xe.apply(void 0,o)),r.push.apply(r,Object(Ee.a)(e.blocks.slice(a.blockIndex+1))),{blocks:r,selection:{start:n,end:n}}},Ge=function(e,t){if(!e.selection)return e;e.selection.start!==e.selection.end&&(e=Ze(e));for(var n=e.selection.start.blockIndex,a=e.selection.start.charIndex,r=e.blocks[n],o=0,c=a,i=r.parts[0];!(i.text.length>=c);)c-=i.text.length,i=r.parts[++o];var l=function(e,t,n){return t>=e.length?(console.warn("updating part ".concat(t," but there are only ").concat(e.length," parts.")),e):e.map((function(e,a){return a===t?n:e}))}(r.parts,o,Object(E.a)({},i,{text:i.text.substr(0,c)+t+i.text.substr(c)})),s={blockIndex:n,charIndex:a+t.length};return{blocks:He(e.blocks,n,{type:r.type,parts:l}),selection:{start:s,end:s}}},Qe=function(e){if(!e.selection)return e;if(e.selection.start!==e.selection.end)return Ze(e);var t=e.selection.start,n=t.blockIndex,a=t.charIndex,r=e.blocks[n];if(a>0){var o=Xe(qe(r,void 0,a-1),qe(r,a)),c={blockIndex:n,charIndex:a-1};return{blocks:He(e.blocks,n,o),selection:{start:c,end:c}}}if(0===n)return e;var i=Object(Ee.a)(e.blocks),l=e.blocks[n-1],s=Xe(l,r);i.splice(n-1,2,s);var u={blockIndex:n-1,charIndex:We(l)};return{blocks:i,selection:{start:u,end:u}}},Ue=function(e){if(!e.selection)return e;if(e.selection.start!==e.selection.end)return Ze(e);var t=e.selection.start,n=t.blockIndex,a=t.charIndex,r=e.blocks[n];if(a<We(r)){var o=Xe(qe(r,void 0,a),qe(r,a+1));return{blocks:He(e.blocks,n,o),selection:e.selection}}if(n===e.blocks.length-1)return e;var c=Object(Ee.a)(e.blocks),i=Xe(e.blocks[n],e.blocks[n+1]);return c.splice(n,2,i),{blocks:c,selection:e.selection}},Ke=function(e){if(!e.selection)return e;e.selection.start!==e.selection.end&&(e=Ze(e));var t=e.selection.start,n=t.blockIndex,a=t.charIndex,r=e.blocks[n],o=qe(r,void 0,a),c=qe(r,a),i=Object(Ee.a)(e.blocks);i.splice(n,1,o,c);var l={blockIndex:n+1,charIndex:0};return{blocks:i,selection:{start:l,end:l}}},$e=function e(t){if(t.nodeType===Node.TEXT_NODE)return t.textContent.length;var n=0;if(t.hasChildNodes)for(var a=t.childNodes,r=0;r<a.length;r++)n+=e(a[r]);return n},Ye=function(e,t,n){var a=n;if(t===e)return{blockIndex:0,charIndex:0};for(var r=[t],o=t.parentElement;o!==e;)r.push(o),o=o.parentElement;var c,i=0;if("p"===r[r.length-1].nodeName.toLowerCase()){var l=r.splice(r.length-1);c=Object(b.a)(l,1)[0]}else if(1===r.length){var s=r.splice(r.length-1);c=Object(b.a)(s,1)[0]}else{var u,d=r.splice(r.length-2),f=Object(b.a)(d,2);u=f[0],c=f[1];for(var v=u.previousSibling;v;)i++,v=v.previousSibling}for(c=c.previousSibling;c;)"p"===c.nodeName.toLowerCase()?i++:c.hasChildNodes&&(i+=c.childNodes.length),c=c.previousSibling;for(var h=0;h<r.length;h++)for(var m=r[h].previousSibling;m;)m&&(a+=$e(m)),m=m.previousSibling;return{blockIndex:i,charIndex:a}},et=function(e,t){if(null===t||null===t.anchorNode||null===t.focusNode||!e.contains(t.anchorNode)||!e.contains(t.focusNode))return null;var n=Ye(e,t.focusNode,t.focusOffset);if(t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset)return{start:n,end:n};var a=Ye(e,t.anchorNode,t.anchorOffset);return n.blockIndex<a.blockIndex||n.blockIndex===a.blockIndex&&n.charIndex<a.charIndex?{start:n,end:a}:{start:a,end:n}},tt=function(e,t){var n=r.a.createElement(a.Fragment,{key:t},e.text);return e.strong&&(n=r.a.createElement("strong",{key:t},n)),e.em&&(n=r.a.createElement("em",{key:t},n)),n},nt=function(e){if(1===e.length&&0===e[0].text.length)return r.a.createElement("br",null);for(var t=[],n=0;n<e.length;n++){var a=e[n];if(a.href){for(var o=[tt(a,n)];n+1<e.length&&e[n+1].href===a.href;)o.push(tt(e[++n],n));t.push(r.a.createElement("a",{key:n,href:a.href},o))}else t.push(tt(a,n))}return r.a.createElement(r.a.Fragment,null,t)},at=function(e,t){for(var n=t.blockIndex,a=void 0,r=0;r<e.childNodes.length;r++){var o=e.childNodes[r],c=o.nodeName.toLowerCase();if("p"===c){if(0===n){a=o;break}n--}else{if("ul"!==c&&"ol"!==c)throw new Error("Unexpected block type: "+o.nodeName);for(var i=0;i<o.childNodes.length;i++){var l=o.childNodes[i];if(0===n){a=l;break}n--}if(a)break}}if(a){if(0===t.charIndex)return{node:a,charIndex:0};var s=function e(t,n){for(var a=n,r=0;r<t.childNodes.length;r++){var o=t.childNodes[r];if(o.nodeType===Node.TEXT_NODE){if(a<=o.textContent.length)return{node:o,charIndex:a};a-=o.textContent.length}else{var c=e(o,a);if("object"===typeof c)return c;a=c}}return a}(a,t.charIndex);return"object"===typeof s?s:void 0}},rt=function(){var e=r.a.useState((function(){return Ve})),t=Object(b.a)(e,2),n=t[0],a=t[1],o=r.a.useRef(null),c=r.a.useCallback((function(e){var t=e;console.log("event",t.inputType,t.data,t),"insertText"===t.inputType&&a((function(e){return Ge(e,t.data||"")})),"deleteContentBackward"===t.inputType&&a(Qe),"deleteContentForward"===t.inputType&&a(Ue),"insertParagraph"===t.inputType&&a(Ke),e.preventDefault()}),[]),i=r.a.useCallback((function(){var e=document.getSelection();a((function(t){return Object(E.a)({},t,{selection:et(o.current,e)})}))}),[]);return r.a.useLayoutEffect((function(){var e=o.current;return e.addEventListener("beforeinput",c),document.addEventListener("selectionchange",i),function(){e.removeEventListener("beforeinput",c),document.removeEventListener("selectionchange",i)}}),[c,i]),r.a.useLayoutEffect((function(){!function(e,t){var n=window.getSelection();if(n)if(null!==t.selection){for(;n.rangeCount>1;)n.removeRange(n.getRangeAt(1));var a=et(e,n);if(null==a||a.start.blockIndex!==t.selection.start.blockIndex||a.start.charIndex!==t.selection.start.charIndex||a.end.blockIndex!==t.selection.end.blockIndex||a.end.charIndex!==t.selection.end.charIndex){n.removeAllRanges();var r=at(e,t.selection.start),o=at(e,t.selection.end);if(r&&o){var c=document.createRange();c.setStart(r.node,r.charIndex),c.setEnd(o.node,o.charIndex),n.addRange(c)}}}else n.removeAllRanges()}(o.current,n)}),[n]),r.a.createElement("div",{className:ze.a.wrapper},r.a.createElement("div",null,r.a.createElement("section",{ref:o,contentEditable:!0,className:ze.a.textEditor,suppressContentEditableWarning:!0},function(e){for(var t=[],n=0;n<e.blocks.length;n++){var a=e.blocks[n];if("p"===a.type)t.push(r.a.createElement("p",{key:n},nt(a.parts)));else{for(var o=[],c=n;c<e.blocks.length;c++){var i=e.blocks[c];if(i.type!==a.type)break;o.push(r.a.createElement("li",{key:c},nt(i.parts))),n=c}"ul"===a.type?t.push(r.a.createElement("ul",{key:n},o)):t.push(r.a.createElement("ol",{key:n},o))}}return r.a.createElement(r.a.Fragment,null,t)}(n)),r.a.createElement("pre",null,"State selection: ",null===n.selection?"-":"".concat(JSON.stringify(n.selection,null,"  "))),r.a.createElement("pre",null,"Browser selection: ",function(){var e=window.getSelection();if(null===e)return"null";if(void 0===e)return"undefined";var t="\n  rangeCount: ".concat(e.rangeCount);null==e.anchorNode?t+="\n  anchorNode: null":t+="\n  anchorNode: ".concat(e.anchorNode.nodeName,"/").concat(e.anchorOffset),null==e.focusNode?t+="\n  focusNode: null":t+="\n  focusNode: ".concat(e.focusNode.nodeName,"/").concat(e.focusOffset);for(var n=0;n<e.rangeCount;n++){var a=e.getRangeAt(n);t+="\n  range ".concat(n,":\n    startContainer: ").concat(a.startContainer.nodeName,"/").concat(a.startOffset,"\n    endContainer: ").concat(a.endContainer.nodeName,"/").concat(a.endOffset)}return t}())),r.a.createElement("div",null,r.a.createElement("pre",null,"Blocks: ",null===n.blocks?"-":"".concat(JSON.stringify(n.blocks,null,"  ")))))},ot=function(){var e=r.a.useState([]),t=Object(b.a)(e,2),n=t[0],a=t[1],o=r.a.useCallback((function(e,t,n,r,o){return a((function(a){return[{type:e,inputType:t,data:n,cancelable:r,isComposing:o}].concat(Object(Ee.a)(a))}))}),[]),c=r.a.useRef(null),i=r.a.useCallback((function(e){var t=e;o(t.type,t.inputType,t.data,t.cancelable,t.isComposing)}),[o]),l=r.a.useCallback((function(){var e,t=document.getSelection();t?(e=t.focusNode?"focus ".concat(t.focusNode.nodeType,":").concat(t.focusOffset):"no focus node",t.anchorNode&&(e+=", anchor ".concat(t.anchorNode.nodeType,":").concat(t.anchorOffset))):e="no selection",o("selectionchange","",e,!1,!1),console.log("selectionchange ".concat(e,"\n"),t)}),[o]),s=r.a.useCallback((function(e){var t=e;o(t.type,t.inputType,t.data,t.cancelable,t.isComposing)}),[o]),u=r.a.useCallback((function(e){var t=e;o(t.type,"",t.data,t.cancelable,!0)}),[o]);return r.a.useLayoutEffect((function(){var e=c.current;e.addEventListener("beforeinput",i),e.addEventListener("input",s),e.addEventListener("compositionstart",u),e.addEventListener("compositionupdate",u),e.addEventListener("compositionend",u);var t=new MutationObserver((function(e){var t=!0,n=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var c=r.value;"attributes"===c.type?console.log("mutationObserver-attributes: the "+c.attributeName+" attribute was modified."):console.log("mutationObserver-".concat(c.type))}}catch(i){n=!0,a=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}}));return t.observe(e,{attributes:!0,childList:!0,subtree:!0}),function(){e.removeEventListener("beforeinput",i),e.removeEventListener("input",s),e.removeEventListener("compositionstart",u),e.removeEventListener("compositionupdate",u),e.removeEventListener("compositionend",u),t.disconnect()}}),[i,l,s,u]),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("section",{ref:c,contentEditable:!0,className:ze.a.textEditor,suppressContentEditableWarning:!0},r.a.createElement("p",{id:"a","data-montruc":{ciao:"monpote"}},"Voici une"," ",r.a.createElement("span",{id:"b",contentEditable:!1,style:{backgroundColor:"yellow"}},"r\xe9f\xe9rence")," ","et un ",r.a.createElement("span",{id:"c"},"texte")," vraiment par",r.a.createElement("span",{id:"d"},"ti"),"culier."))),r.a.createElement("div",null,r.a.createElement("pre",{style:{textAlign:"left"}},c.current?c.current.outerHTML:"")),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"type"),r.a.createElement("th",null,"inputType"),r.a.createElement("th",null,"data"),r.a.createElement("th",null,"cancelable"),r.a.createElement("th",null,"isComposing")),n.map((function(e,t){return r.a.createElement("tr",{key:n.length-t},r.a.createElement("td",null,e.type),r.a.createElement("td",null,e.inputType),r.a.createElement("td",null,e.data),r.a.createElement("td",null,e.cancelable.toString()),r.a.createElement("td",null,e.isComposing.toString()))}))))};function ct(){var e=Object(u.g)();return r.a.createElement(r.a.Fragment,null,"Invalid path: \xab ",e.pathname," \xbb")}var it=function(){return r.a.createElement("div",{className:s.a.app},r.a.createElement(p,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0},r.a.createElement(u.a,{to:"/tasks"})),r.a.createElement(u.b,{path:"/editor-analysis",exact:!0},r.a.createElement(Ne,null,r.a.createElement(ot,null))),r.a.createElement(u.b,{path:"/editor-test",exact:!0},r.a.createElement(Ne,null,r.a.createElement(rt,null))),r.a.createElement(u.b,{path:"/home",exact:!0},r.a.createElement(Ne,null,"Home page",r.a.createElement(Re,null))),r.a.createElement(u.b,{path:"/tasks",exact:!0},r.a.createElement(Ae,null)),r.a.createElement(u.b,{path:"*"},r.a.createElement(ct,null)))))},lt=n(27),st=n.n(lt),ut=n(37),dt=n.n(ut),ft=function(e){for(var t=e.done,n=e.total,a=e.message,o=[],c=0;c<n;c++)o.push(r.a.createElement("rect",{key:c,x:120*c,y:"2.5",width:"95",height:"95",rx:"25",ry:"25",style:{fill:c<t?"rgb(125, 160, 191)":"rgb(255, 255, 255)",strokeWidth:5,stroke:"rgb(67, 106, 140)"}}));return r.a.createElement("div",{className:st.a.loadStatus},r.a.createElement("img",{src:dt.a,alt:"logo"}),r.a.createElement("svg",{className:st.a.loadBar,viewBox:"0 0 ".concat(120*n-20," 100")},o),a)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(){return r.a.createElement(L,{getNotAuthenticatedComponents:function(){return r.a.createElement(ft,{done:0,total:2,message:"Authentification en cours..."})},getAuthenticatedComponents:function(){return r.a.createElement(D,null,r.a.createElement(M,{getNotReadyComponents:function(){return r.a.createElement(ft,{done:1,total:2,message:"Chargement des donn\xe9es..."})},getReadyComponents:function(){return r.a.createElement(Oe,null,r.a.createElement(W,null,r.a.createElement(i.a,null,r.a.createElement(it,null))))}}))}})}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[40,1,2]]]);
//# sourceMappingURL=main.ebe89ee8.chunk.js.map