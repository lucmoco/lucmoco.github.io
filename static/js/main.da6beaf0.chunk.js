(this.webpackJsonpboussole=this.webpackJsonpboussole||[]).push([[0],{168:function(e,t,n){e.exports=n(330)},173:function(e,t,n){},174:function(e,t,n){},216:function(e,t){},218:function(e,t){},252:function(e,t){},253:function(e,t){},330:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(163),i=n.n(o),r=(n(173),n(174),n(28)),c=n(60),u=n(59),l=n(6),h=n.n(l),d=n(39),p=n(164),f=n(165),m=["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/drive"];window.boussoleAuthManager||(window.boussoleAuthManager=new function e(){var t=this;Object(p.a)(this,e),this.oAuth2Client=new f.OAuth2Client({clientId:"186913784324-548k2j5jsqlht13qhu2miegr42fu0v56.apps.googleusercontent.com",redirectUri:"".concat(window.location.origin)}),this.state=void 0,this.listeners=[],this.setState=function(e){t.state=e,t.listeners.forEach((function(t){return t(e)}))},this.subscribe=function(e){t.listeners.push(e)},this.unsubscribe=function(e){var n=t.listeners.indexOf(e);n>-1&&t.listeners.splice(n,1)},this.getState=function(){return t.state},this.getOAuth2Client=function(){return t.oAuth2Client},this.oAuth2Client.transporter.configure();var n=new URLSearchParams(window.location.hash.substr(1)),a=n.get("access_token");if(null!=a){var s=n.get("state");console.debug("Auth: TokenReceived"),this.state={status:"TokenReceived"},this.oAuth2Client.setCredentials({access_token:a}),localStorage.setItem("access_token",a),window.history.replaceState(null,"",s),this.setState({status:"Authenticated"})}else(a=localStorage.getItem("access_token"))?(this.oAuth2Client.setCredentials({access_token:a}),this.state={status:"Authenticated"}):(console.debug("Auth: RedirectingToGoogle"),this.state={status:"AuthenticationNeeded"},Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.oAuth2Client.generateAuthUrl({scope:m,login_hint:"lucmoco@gmail.com",state:window.location.pathname+window.location.search+window.location.hash,response_type:"token"}),window.location.href=n;case 2:case"end":return e.stop()}}),e)})))())});var w=window.boussoleAuthManager;function g(){var e=Object(a.useState)(w.getState()),t=Object(u.a)(e,2),n=t[0],o=t[1];return s.a.useEffect((function(){var e;e=o,w.subscribe(e)}),[]),n}function v(){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(h.a.mark((function e(){var t,n,a,s,o,i,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.getOAuth2Client(),n=new URLSearchParams({q:"'root' in parents and mimeType = 'application/vnd.google-apps.folder' and name = 'notes-perso-boussole'",fields:"files/id"}),e.next=4,t.request({url:"https://www.googleapis.com/drive/v3/files?".concat(n)});case 4:return a=e.sent,s=a.data.files[0].id,o=new URLSearchParams({q:"'".concat(s,"' in parents and name = 'notes.json'"),fields:"files/id"}),e.next=9,t.request({url:"https://www.googleapis.com/drive/v3/files?".concat(o)});case 9:return i=e.sent,r=i.data.files[0].id,e.next=13,t.request({url:"https://www.googleapis.com/drive/v3/files/".concat(r,"?alt=media")});case 13:return c=e.sent,e.abrupt("return",c.data);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){var e=s.a.useState(""),t=Object(u.a)(e,2),n=t[0],a=t[1];return s.a.useEffect((function(){Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,v();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()})),s.a.createElement("div",null,"Page content: ",n)}function E(){var e=Object(r.f)();return s.a.createElement(s.a.Fragment,null,"Invalid path: \xab ",e.pathname," \xbb")}var k=function(){var e=g();return"Error"===e.status?s.a.createElement("div",null,'Authentication failed: "',e.errorMessage,'"'):"AuthenticationNeeded"===e.status?s.a.createElement("div",null,"Auth required. AuthenticationNeeded..."):"TokenReceived"===e.status?s.a.createElement("div",null,"TokenReceived..."):s.a.createElement(c.a,null,s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement(c.b,{to:"/"},"Home"),s.a.createElement(c.b,{to:"/page"},"Page"),s.a.createElement("div",null,"Authentication Status: ",e&&e.status),s.a.createElement(A,null),s.a.createElement(r.c,null,s.a.createElement(r.a,{path:"/auth",exact:!0},"Authentication"),s.a.createElement(r.a,{path:"/",exact:!0},"Home"),s.a.createElement(r.a,{path:"/page",exact:!0},"Some page"),s.a.createElement(r.a,{path:"*"},s.a.createElement(E,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},84:function(e,t){}},[[168,1,2]]]);
//# sourceMappingURL=main.da6beaf0.chunk.js.map